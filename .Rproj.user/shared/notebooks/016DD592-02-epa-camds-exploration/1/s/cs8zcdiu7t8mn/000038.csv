"0","# Load the allowance holdings data"
"0","frs_allowance_holdings <- read_csv(here::here(""Data"", ""Raw"", ""EPA_CAMD_Allowance_Holdings"", ""CAMD_account_holdings_bulk.csv""))"
"2","[1mRows: [22m[34m467459[39m [1mColumns: [22m[34m12[39m"
"2","[36mâ”€â”€[39m [1mColumn specification[22m [36mâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[39m
[1mDelimiter:[22m "",""
[31mchr[39m (6): account_number, account_name, program_code, state, owner_operator, account_type
[32mdbl[39m (6): facility_id, allowance_vintage_year, allowance_block_total, serial_number_start, serial_number_end, epa_region"
"2","
[36mâ„¹[39m Use `spec()` to retrieve the full column specification for this data.
[36mâ„¹[39m Specify the column types or set `show_col_types = FALSE` to quiet this message."
"0","str(frs_allowance_holdings)"
"1","spc_tbl_ [467,459 Ã— 12]"
"1",""
"1"," (S3: "
"1",""
"1","spec_tbl_df/tbl_df/tbl/data.frame"
"1",""
"1",")"
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","account_number        "
"1",""
"1",":"
"1"," chr [1:467459] "
"1",""
"1","""000003FACLTY"" ""000003FACLTY"" ""000003FACLTY"" ""000003FACLTY"""
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","account_name          "
"1",""
"1",":"
"1"," chr [1:467459] "
"1",""
"1","""Barry"" ""Barry"" ""Barry"" ""Barry"""
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","facility_id           "
"1",""
"1",":"
"1"," num [1:467459] "
"1",""
"1","3 3 3 3 3 3 3 3 3 3"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","program_code          "
"1",""
"1",":"
"1"," chr [1:467459] "
"1",""
"1","""CSOSG2"" ""CSOSG2"" ""CSOSG2"" ""CSOSG2"""
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","allowance_vintage_year"
"1",""
"1",":"
"1"," num [1:467459] "
"1",""
"1","2019 2020 2020 2020 2020"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","allowance_block_total "
"1",""
"1",":"
"1"," num [1:467459] "
"1",""
"1","809 67 44 568 1073"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","serial_number_start   "
"1",""
"1",":"
"1"," num [1:467459] "
"1",""
"1","958 15 82 126 694"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","serial_number_end     "
"1",""
"1",":"
"1"," num [1:467459] "
"1",""
"1","1766 81 125 693 1766"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","state                 "
"1",""
"1",":"
"1"," chr [1:467459] "
"1",""
"1","""AL"" ""AL"" ""AL"" ""AL"""
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","epa_region            "
"1",""
"1",":"
"1"," num [1:467459] "
"1",""
"1","4 4 4 4 4 4 4 4 4 4"
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","owner_operator        "
"1",""
"1",":"
"1"," chr [1:467459] "
"1",""
"1","""Alabama Power Company (Operator)|Alabama Power Company (Owner)"" ""Alabama Power Company (Operator)|Alabama Power Company (Owner)"" ""Alabama Power Company (Operator)|Alabama Power Company (Owner)"" ""Alabama Power Company (Operator)|Alabama Power Company (Owner)"""
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","$ "
"1",""
"1","account_type          "
"1",""
"1",":"
"1"," chr [1:467459] "
"1",""
"1","""Facility Account"" ""Facility Account"" ""Facility Account"" ""Facility Account"""
"1",""
"1"," ..."
"1",""
"1","
"
"1"," "
"1",""
"1","- attr(*, ""spec"")="
"1","
"
"1",""
"1","  .. cols(
  ..   account_number = [31mcol_character()[39m,
  ..   account_name = [31mcol_character()[39m,
  ..   facility_id = [32mcol_double()[39m,
  ..   program_code = [31mcol_character()[39m,
  ..   allowance_vintage_year = [32mcol_double()[39m,
  ..   allowance_block_total = [32mcol_double()[39m,
  ..   serial_number_start = [32mcol_double()[39m,
  ..   serial_number_end = [32mcol_double()[39m,
  ..   state = [31mcol_character()[39m,
  ..   epa_region = [32mcol_double()[39m,
  ..   owner_operator = [31mcol_character()[39m,
  ..   account_type = [31mcol_character()[39m
  .. )"
"1",""
"1","
"
"1"," "
"1",""
"1","- attr(*, ""problems"")="
"1","<externalptr> "
"1",""
"1",""
"1",""
"1","
"
"0","summary(frs_allowance_holdings)"
"1",""
"1"," account_number    "
"1"," account_name      "
"1","  facility_id    "
"1"," program_code      "
"1"," allowance_vintage_year"
"1"," allowance_block_total"
"1","
"
"1"," Length:467459     "
"1"," Length:467459     "
"1"," Min.   :    3   "
"1"," Length:467459     "
"1"," Min.   :1995          "
"1"," Min.   :     1       "
"1","
"
"1"," Class :character  "
"1"," Class :character  "
"1"," 1st Qu.: 1217   "
"1"," Class :character  "
"1"," 1st Qu.:2009          "
"1"," 1st Qu.:     5       "
"1","
"
"1"," Mode  :character  "
"1"," Mode  :character  "
"1"," Median : 2828   "
"1"," Mode  :character  "
"1"," Median :2018          "
"1"," Median :    42       "
"1","
"
"1","                   "
"1","                   "
"1"," Mean   : 7005   "
"1","                   "
"1"," Mean   :2020          "
"1"," Mean   :  1235       "
"1","
"
"1","                   "
"1","                   "
"1"," 3rd Qu.: 6030   "
"1","                   "
"1"," 3rd Qu.:2025          "
"1"," 3rd Qu.:   611       "
"1","
"
"1","                   "
"1","                   "
"1"," Max.   :70454   "
"1","                   "
"1"," Max.   :2054          "
"1"," Max.   :250000       "
"1","
"
"1","                   "
"1","                   "
"1"," NA's   :286681  "
"1","                   "
"1","                       "
"1","                      "
"1","
"
"1",""
"1"," serial_number_start"
"1"," serial_number_end"
"1","    state          "
"1","   epa_region    "
"1"," owner_operator    "
"1"," account_type      "
"1","
"
"1"," Min.   :      1    "
"1"," Min.   :      1  "
"1"," Length:467459     "
"1"," Min.   : 1.00   "
"1"," Length:467459     "
"1"," Length:467459     "
"1","
"
"1"," 1st Qu.: 679535    "
"1"," 1st Qu.: 679584  "
"1"," Class :character  "
"1"," 1st Qu.: 4.00   "
"1"," Class :character  "
"1"," Class :character  "
"1","
"
"1"," Median :2508550    "
"1"," Median :2510158  "
"1"," Mode  :character  "
"1"," Median : 5.00   "
"1"," Mode  :character  "
"1"," Mode  :character  "
"1","
"
"1"," Mean   :3424106    "
"1"," Mean   :3425340  "
"1","                   "
"1"," Mean   : 4.87   "
"1","                   "
"1","                   "
"1","
"
"1"," 3rd Qu.:5993708    "
"1"," 3rd Qu.:5997296  "
"1","                   "
"1"," 3rd Qu.: 6.00   "
"1","                   "
"1","                   "
"1","
"
"1"," Max.   :9994702    "
"1"," Max.   :9995101  "
"1","                   "
"1"," Max.   :10.00   "
"1","                   "
"1","                   "
"1","
"
"1","                    "
"1","                  "
"1","                   "
"1"," NA's   :286681  "
"1","                   "
"1","                   "
"1","
"
"0","# Aggregate total allowances by vintage year for the ""ARP"" program"
"0","allowance_over_time <- frs_allowance_holdings %>%"
"0","  filter(program_code %in% c(""ARP"")) %>%"
"0","  group_by(allowance_vintage_year) %>% "
"0","  summarise(total_allowances = sum(allowance_block_total, na.rm = TRUE)) %>%"
"0","  arrange(allowance_vintage_year)"
"0",""
"0","# Create a publication-quality bar graph"
"0","ggplot(allowance_over_time, aes(x = factor(allowance_vintage_year), y = total_allowances)) +"
"0","  geom_bar(stat = ""identity"", fill = ""steelblue"") +"
"0","  scale_y_continuous(labels = comma) +"
"0","  labs("
"0","    title = ""EPA Total Allowances Over Time (ARP Program)"","
"0","    x = ""Vintage Year"","
"0","    y = ""Total Allowances"""
"0","  ) +"
"0","  theme_minimal(base_size = 14) +"
"0","  theme("
"0","    plot.title = element_text(face = ""bold"", hjust = 0.5),"
"0","    axis.title = element_text(face = ""bold""),"
"0","    axis.text.x = element_text(angle = 45, size = 5, hjust = 1),"
"0","    axis.text.y = element_text(size = 12)"
"0","  )"
