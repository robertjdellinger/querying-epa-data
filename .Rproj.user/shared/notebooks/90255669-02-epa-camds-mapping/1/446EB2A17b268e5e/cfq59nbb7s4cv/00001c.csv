"0","# Filter out facilities with missing coordinates"
"0","facility_map_data <- facility_summary %>% "
"0","  filter(!is.na(latitude) & !is.na(longitude))"
"0",""
"0","# Define custom awesome markers with FontAwesome icons"
"0","customIcon <- awesomeIcons("
"0","  icon = ""industry"",      # 'industry' icon to represent facilities"
"0","  iconColor = ""white"","
"0","  markerColor = ""blue"",   # Blue markers contrast well on a dark basemap"
"0","  library = ""fa"""
"0",")"
"0",""
"0","leaflet(data = facility_map_data) %>%"
"0","  addProviderTiles(""CartoDB.DarkMatter"") %>%  # Modern dark basemap"
"0","  addAwesomeMarkers("
"0","    lng = ~longitude, "
"0","    lat = ~latitude,"
"0","    icon = customIcon,"
"0","    popup = ~paste0(""<strong>"", facility_name, ""</strong><br>"","
"0","                     ""Facility ID: "", facility_id, ""<br>"","
"0","                     ""State: "", state, ""<br>"","
"0","                     ""First Operation: "", first_operation, ""<br>"","
"0","                     ""Year Range: "", year_range, ""<br>"","
"0","                     ""Program Code: "", program_code, ""<br>"","
"0","                     ""Units: "", n_units),"
"0","    clusterOptions = markerClusterOptions()  # Enable clustering to improve readability"
"0","  ) %>%"
"0","  addScaleBar(position = ""bottomleft"") %>%  # Add a scale bar"
"0","  addEasyButton(easyButton("
"0","    icon = ""fa-globe"", title = ""Reset View"","
"0","    onClick = JS(""function(btn, map){ map.setView([39.8283, -98.5795], 4); }"")"
"0","  ))"
