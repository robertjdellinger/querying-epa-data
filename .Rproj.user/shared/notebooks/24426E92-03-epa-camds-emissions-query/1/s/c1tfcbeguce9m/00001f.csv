"0",""
"0","# Set your API key"
"0","# api_key <- ""YOUR_API_KEY_HERE"""
"0","selected_states <- c(""CA"")"
"0",""
"0","# API info"
"0","apiUrlBase <- ""https://api.epa.gov/easey"""
"0",""
"0","# streaming hourly emissions endpoint url"
"0","dailyEmissionsUrl <- paste0(apiUrlBase,""/streaming-services/emissions/apportioned/daily?API_KEY="",api_key)"
"0",""
"0","# api parameters for the streaming emissions/apportioned/daily endpoint"
"0","query <- list(beginDate = ""2024-01-01"","
"0","              endDate = ""2024-01-31"","
"0","              stateCode = paste0(selected_states, collapse = '|'))"
"0",""
"0","if (as.Date(query$endDate) - as.Date(query$beginDate) > 31) {"
"0","  warning(""The request you're making could be too large for the streaming services API and may result in a bad request. Please consider using the bulk data api endpoint instead. An example can be found in the bulk_data_demo.py file."")"
"0","}"
"0",""
"0","# making get request using the emissions/apportioned/daily endpoint"
"0","res = GET(dailyEmissionsUrl, query = query)"
"0","# printing the response error message if the response is not successful"
"0","if (res$status_code > 399) {"
"0","  errorFrame <- fromJSON(rawToChar(res$content))"
"0","  stop(paste(""Error Code:"",errorFrame$error$code,errorFrame$error$message))"
"0","}"
"0",""
"0","fieldMappings <- fromJSON(res$headers$`x-field-mappings`)"
"0","print(fieldMappings)"
